
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#authorization-description" class="toc-h1 toc-link" data-title="authorization-description">Authorization Description</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authorization-of-third-party-web-applications" class="toc-h2 toc-link" data-title="authorization-of-third-party-web-applications">Authorization of third-party web-applications</a>
                  </li>
                  <li>
                    <a href="#client-authorization" class="toc-h2 toc-link" data-title="client-authorization">Client authorization</a>
                  </li>
                  <li>
                    <a href="#access_token-refresh" class="toc-h2 toc-link" data-title="access_token-refresh">Access_token refresh</a>
                  </li>
                  <li>
                    <a href="#authorization-of-applications-on-admitad-com" class="toc-h2 toc-link" data-title="authorization-of-applications-on-admitad-com">Authorization of applications on Admitad.com</a>
                  </li>
                  <li>
                    <a href="#description-of-signed_request-line" class="toc-h2 toc-link" data-title="description-of-signed_request-line">Description of signed_request line</a>
                  </li>
                  <li>
                    <a href="#help-on-access-settings" class="toc-h2 toc-link" data-title="help-on-access-settings">Help on access settings</a>
                  </li>
                  <li>
                    <a href="#help-on-api-response-codes" class="toc-h2 toc-link" data-title="help-on-api-response-codes">Help on API response codes</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.admitad.com/en/sign_in/'>Sign In for a Developer Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Admitad API is a functional interface which gives access to the whole functionality of the admitad.com. It is compatible with all programming languages which supports JSON.</p>

<p>This interface helps you to create applications for Admitad affiliate network. You can build up applications to analyze your own statistics and accounting records or to put them up for sale in the Admitad App Store.</p>

<p>First of all we recommend to create an account on admitad.com and get acquainted with the main service items, then decide what kind of application you want to create.</p>

<p>After the final idea formation it`s useful to turn a hand to the architecture development and study the opportunities of our API, with the help of which you create your application.</p>
<h1 id='authorization-description'>Authorization Description</h1>
<p>Open protocol OAuth 2.0 is used for the purposes of Admitad applications authorization. The current documentation includes an authorization mechanism that complies with the protocol specification:</p>

<p>Authorization of applications on Admitad.com
        <br>
        Authorization of third-party web-applications
        <br>
        Client authorization
        <br>
        Access_token refresh
        <br>
        Help on access settings
        <br></p>

<p>Upon authorization you will be provided with an access_token with the help of which you can make requests to Admitad API. Depending on the set of acquired access rights some API methods may not be available.</p>
<h2 id='authorization-of-third-party-web-applications'>Authorization of third-party web-applications</h2>
<p><strong>Opening authorization dialogue</strong></p>

<p>To authorize the user, it is necessary to redirect the user’s browser on URL https://api.admitad.com/authorize/, using application/x-www-form-urlencoded data format and transmit the following parameters:</p>

<table>
  <tr>
    <th>Name</th>
    <th>Required</th> 
    <th>Description</th>
  </tr>
  <tr>
    <td>client_id</td>
    <td>✔</td> 
    <td>ID of your application.*</td>
  </tr>
  <tr>
    <td>redirect_uri</td>
    <td>✔</td> 
    <td>URL to which the user will be redirected after authorization.**</td>
  </tr>
  <tr>
    <td>state</td>
    <td></td> 
    <td>The value used by the client to check the state between request and the server response.***</td>
  </tr>
  <tr>
    <td>scope</td>
    <td>✔</td> 
    <td>A list of application access settings separated by a space that shall be requested.</td>
  </tr>
  <tr>
    <td>response_type</td>
    <td>✔</td> 
    <td>Type of response you would like to get.</td>
  </tr>
</table>

<ul>
  <li>*   The ID of the application is available for the logged in publisher at the homepage for developers (when the “Get keys” button is clicked).</li>
  <li>**  The domain of the specified URL shall comply with the primary domain in the settings of the application)</li>
  <li>*** The server returns this value when it redirects the user agent back to the client</li>
</ul>

<p>Example of request:</p>

<p><code>https://api.admitad.com/authorize/?scope=advcampaigns banners websites&amp;state=7c232ff20e64432fbe071228c0779f&amp;redirect_uri=https://google.com/&amp;response_type=code&amp;client_id=cb281d918a37e346b45e9aea1c6eb7</code></p>

<p>If the user is not logged in, a dialogue box will be displayed offering to enter login and password.</p>

<p><strong>Granting access rights</strong></p>

<p>When logged in the user will be offered to authorize the application by providing access to required settings requested by means of parameter scope. A complete list of settings is available in the section of application access rights.</p>

<p><strong>Getting code parameter</strong></p>

<p>Upon successful app authorization the user’s browser will be redirected to redirect_uri, the URL specified when the authorization dialogue appears. The code to get an access token code will be transferred in GET-parameter to the specified address:
<code>https://redirect_uri/?state=7c232ff20e64432fbe071228c0779f&amp;code=c75ebf64ad48a352630b6d953ce365</code></p>

<p>In case of an error, the user’s browser will be redirected with the error code and description:
<code>https://redirect_uri/?state=7c232ff20e64432fbe071228c0779f&amp;error_description=client_id+cb281d918a37e346b45e9aea1c6eb7+doesn&#39;t+exist&amp;error=invalid_client</code></p>

<p><strong>Getting access_token</strong></p>

<p>To get access_token it is required to send POST request to URL https://api.admitad.com/token/ using data format application/x-www-form-urlencoded and transfer the following parameters:</p>

<table>
  <tr>
    <th>Name</th>
    <th>Required</th> 
    <th>Description</th>
  </tr>
  <tr>
    <td>client_id</td>
    <td>✔</td> 
    <td>ID of your application.*</td>
  </tr>
  <tr>
    <td>client_secret</td>
    <td>✔</td> 
    <td>Secret key of your application</td>
  </tr>
  <tr>
    <td>code</td>
    <td>✔</td> 
    <td>The code received at the previous stage of authorization (parameter redirect_uri).</td>
  </tr>
  <tr>
    <td>grant_type</td>
    <td>✔</td> 
    <td>Type of request - authorization_code</td>
  </tr>
  <tr>
    <td>redirect_uri</td>
    <td>✔</td> 
    <td>Address, to which the user will be re-addressed after authentication (the domain of the indicated address must correspond to the main domain in the application settings).</td>
  </tr>
</table>

<p>The request should use HTTP Basic authentification with the use of client_id* and client_secret* as access settings. The header of authorization is a base64-encoded string that contains colon-concatenated client_id and client_secret.</p>

<p>* The identifier (client_id) and the secret key (client_secret) of the application are available for the logged in publisher at the homepage for developers (when the “Get keys” button is clicked).</p>

<p><strong>Below is an example of forming a base64-encoded authorization header in Python 2.7 for client_id=’cb281d918a37e346b45e9aea1c6eb7’ and client_secret=’a0f8a8b24de8b8182a0ddd2e89f5b1’:</strong></p>

<p><code>from base64 import b64encode
    client_id=&#39;cb281d918a37e346b45e9aea1c6eb7&#39;
    client_secret=&#39;a0f8a8b24de8b8182a0ddd2e89f5b1&#39;
    data = client_id + &#39;:&#39; + client_secret
    # data = &#39;cb281d918a37e346b45e9aea1c6eb7:a0f8a8b24de8b8182a0ddd2e89f5b1&#39;
    data_b64_encoded = b64encode(data)</code></p>

<p><strong>Below is an example of a base64-encoded authorization header (the data_b64_encoded variable):</strong></p>

<p><code>Y2IyODFkOTE4YTM3ZTM0NmI0NWU5YWVhMWM2ZWI3OmEwZjhhOGIyNGRlOGI4MTgyYTBkZGQyZTg5ZjViMQ==</code></p>

<p><strong>Below is an example of a request using a curl utility for client_id=cb281d918a37e346b45e9aea1c6eb7, where b64XXX is the base64-encoded authorization header:</strong></p>

<p><code>curl -H &#39;Authorization: Basic b64XXX&#39; -X POST https://api.admitad.com/token/ -d &#39;code=c75ebf64ad48a352630b6d953ce365&amp;client_secret=a0f8a8b24de8b8182a0ddd2e89f5b1&amp;grant_type=authorization_code&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;redirect_uri=https%3A%2F%2Fgoogle.com%2F&#39;</code></p>

<p><strong>Example of request:</strong></p>

<p><code>POST /token/ HTTP/1.1</code>
<code>Host: api.admitad.com</code>
<code>Content-Type: application/x-www-form-urlencoded;charset=UTF-8</code></p>

<p><code>code=c75ebf64ad48a352630b6d953ce365&amp;client_secret=a0f8a8b24de8b8182a0ddd2e89f5b1&amp;grant_type=authorization_code&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;redirect_uri=https%3A%2F%2Fgoogle.com%2F</code></p>

<p>As a result of this request you will get a new access_token. The time to live of the token in seconds expires_in, refresh_token and additional information for users are returned as well:</p>

<p><code>{  
&quot;username&quot;: &quot;webmaster1,
&quot;first_name&quot;: &quot;name&quot;,  
&quot;last_name&quot;&#39;: &quot;surname&quot;,  
&quot;language&quot;: &quot;ru&quot;,  
&quot;access_token&quot;: &quot;4b8b33955a&quot;,  
&quot;token_type&quot;: &quot;bearer&quot;,  
&quot;expires_in&quot;: 604800,  
&quot;refresh_token&quot;: &quot;ea957cce42&quot;,  
&quot;scope&quot;: &quot;advcampaigns banners websites&quot;  
}</code></p>
<h2 id='client-authorization'>Client authorization</h2>
<p><strong>Client authorization</strong></p>

<p>To authorize the user, it is required to send POST request to URL https://api.admitad.com/token/, using data format application/x-www-form/urlencoded and transfer the following parameters:</p>

<table>
  <tr>
    <th>Name</th>
    <th>Required</th> 
    <th>Description</th>
  </tr>
  <tr>
    <td>client_id</td>
    <td>✔</td> 
    <td>ID of your application*</td>
  </tr>
  <tr>
    <td>scope</td>
    <td>✔</td> 
    <td>A list of application access settings separated by a space that shall be requested.</td>
  </tr>
  <tr>
    <td>grant_type</td>
    <td>✔</td> 
    <td>Type of request: client_credentials</td>
  </tr>
</table>

<p>It is required to use HTTP Basic authentification for the request using client_id* and client_secret* as access parameters. The authorization header is base64 encoded line that contains client_id and client_secret united by a colon.</p>

<ul>
  <li>* The identifier (client_id) and the secret key (client_secret) of the application are available for the logged in publisher at the homepage for developers (when the “Get keys” button is clicked).</li>
</ul>

<p><strong>Below is an example of forming a base64-encoded authorization header in Python 2.7 for client_id=’cb281d918a37e346b45e9aea1c6eb7’ and client_secret=’a0f8a8b24de8b8182a0ddd2e89f5b1’:</strong></p>

<p><code>from base64 import b64encode</code>
<code>client_id=&#39;cb281d918a37e346b45e9aea1c6eb7&#39;</code>
<code>client_secret=&#39;a0f8a8b24de8b8182a0ddd2e89f5b1&#39;</code>
<code>data = client_id + &#39;:&#39; + client_secret</code>
<code># data = &#39;cb281d918a37e346b45e9aea1c6eb7:a0f8a8b24de8b8182a0ddd2e89f5b1&#39;</code>
<code>data_b64_encoded = b64encode(data)</code></p>

<p><strong>Below is an example of a base64-encoded authorization header (the data_b64_encoded variable):</strong></p>

<p><code>Y2IyODFkOTE4YTM3ZTM0NmI0NWU5YWVhMWM2ZWI3OmEwZjhhOGIyNGRlOGI4MTgyYTBkZGQyZTg5ZjViMQ==</code></p>

<p><strong>Below is an example of a request using a curl utility for client_id=cb281d918a37e346b45e9aea1c6eb7, where b64XXX is the base64-encoded authorization header:</strong></p>

<p><code>curl -H &#39;Authorization: Basic b64XXX&#39; -X POST https://api.admitad.com/token/ -d &#39;grant_type=client_credentials&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;scope=advcampaigns banners websites&#39;</code></p>

<p><strong>Example of request:</strong></p>

<p><code>POST /token/ HTTP/1.1</code>
<code>Host: api.admitad.com</code>
<code>Authorization: Basic b64XXX</code>
<code>Content-Type: application/x-www-form-urlencoded;charset=UTF-8</code></p>

<p><code>grant_type=client_credentials&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;scope=advcampaigns banners websites</code></p>

<p>As a result of this request you will get a new access_token. The time to live of the token in seconds expires_in, refresh_token and additional information for users are returned as well:</p>

<p><code>{</code>
    <code>&quot;username&quot;: &quot;webmaster1&quot;,</code>
    <code>&quot;first_name&quot;: &quot;name&quot;,</code>
    <code>&quot;last_name&quot;&#39;: &quot;surname&quot;,</code>
    <code>&quot;language&quot;: &quot;ru&quot;,</code>
    <code>&quot;access_token&quot;: &quot;4b8b33955a&quot;,</code>
    <code>&quot;token_type&quot;: &quot;bearer&quot;,</code>
    <code>&quot;expires_in&quot;: 604800,</code>
    <code>&quot;refresh_token&quot;: &quot;ea957cce42&quot;,</code>
    <code>&quot;scope&quot;: &quot;advcampaigns banners websites&quot;</code>
<code>}</code></p>
<h2 id='access_token-refresh'>Access_token refresh</h2>
<p><strong>Access_token refresh</strong></p>

<p>In case access_token expires, you can update it using refresh_token. Make POST request to URL https://api.admitad.com/token/ using data format application/x-www-form-urlencoded and transfer the following parameters:</p>

<table>
  <tr>
    <th>Name</th>
    <th>Required</th> 
    <th>Description</th>
  </tr>
  <tr>
    <td>client_id</td>
    <td>✔</td> 
    <td>ID of your application.*</td>
  </tr>
  <tr>
    <td>client_secret</td>
    <td>✔</td> 
    <td>Secret key of your application</td>
  </tr>
  <tr>
    <td>grant_type</td>
    <td>✔</td> 
    <td>Type of request: client_credentials</td>
  </tr>
  <tr>
    <td>refresh_token</td>
    <td>✔</td> 
    <td>The value obtained after authorization.</td>
  </tr>
</table>

<ul>
  <li>* ID and the secret key of the application are available for the logged in publisher at the homepage for developers (when the “Get keys” button is clicked).</li>
</ul>

<p><strong>Below is an example of a request using a curl utility for client_id=cb281d918a37e346b45e9aea1c6eb7, client_secret=a0f8a8b24de8b8182a0ddd2e89f5b1 and refresh_token=7521b7640c:</strong></p>

<p><code>curl -X POST https://api.admitad.com/token/ -d &#39;grant_type=refresh_token&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;refresh_token=7521b7640c&amp;client_secret=a0f8a8b24de8b8182a0ddd2e89f5b1&#39;</code></p>

<p><strong>Example of request:</strong></p>

<p><code>POST /token/ HTTP/1.1</code>
<code>Host: api.admitad.com</code>
<code>Content-Type: application/x-www-form-urlencoded;charset=UTF-8</code></p>

<p><code>grant_type=refresh_token&amp;client_id=cb281d918a37e346b45e9aea1c6eb7&amp;refresh_token=7521b7640c&amp;client_secret=a0f8a8b24de8b8182a0ddd2e89f5b1</code></p>

<p>As a result of this request you will get a new access_token. The time to live of the token in seconds expires_in, refresh_token and additional information for users are returned as well:</p>

<p><code>{</code>
    <code>&quot;username&quot;: &quot;webmaster1&quot;,</code>
    <code>&quot;first_name&quot;: &quot;name&quot;,</code>
    <code>&quot;last_name&quot;&#39;: &quot;surname&quot;,</code>
    <code>&quot;language&quot;: &quot;ru&quot;,</code>
    <code>&quot;access_token&quot;: &quot;4b8b33955a&quot;,</code>
    <code>&quot;token_type&quot;: &quot;bearer&quot;,</code>
    <code>&quot;expires_in&quot;: 604800,</code>
    <code>&quot;refresh_token&quot;: &quot;ea957cce42&quot;,</code>
    <code>&quot;scope&quot;: &quot;advcampaigns banners websites&quot;</code>
<code>}</code></p>
<h2 id='authorization-of-applications-on-admitad-com'>Authorization of applications on Admitad.com</h2>
<p><strong>Authorization of applications on Admitad.com</strong></p>

<p>You may create any integrated application uploaded from your server using an IFrame element built on Admitad page. Such applications can display information by means of any technologies supported by the user browser: HTML, Javasсript, AJAX, Flash, etc.</p>

<p><strong>Due to the fact that Admitad.com uses a secure protocol (HTTPS), your website uploaded in our ‘container’ shall also use HTTPS protocol. Buy an SSL-certificate and install it on your server.</strong></p>

<p><strong>Application launch parameters</strong></p>

<p>When the application is displayed by means of a request line (GET or POST method), the following parameters are sent to the application:</p>

<ul>
 <li>signed_request</li>
 <li>retloc is the URL of the page in which iframe with the application are built.</li>
</ul>

<p><strong>Example of <code>retloc</code>:</strong>
<code>https%3A//admitad.com/appstore/app/getcoupon/</code></p>

<p><strong>Example of a request</strong></p>

<p><code>https://getcoupons.ru/?signed_request=d3ddf1100c5e47a466cafe1e0dc8cb40a4f7bc3219744be1e049dd6d7a76450c.eyJ1c2VybmFtZSI6ICJhZHZlcnRpc2VyMSIsICJmaXJzdF9uYW1lIjogIm5hbWUiLCAibGFzdF9uYW1lIjogInN1cm5hbWUiLCAiYWxnb3JpdGhtIjogIkhNQUMtU0hBMjU2IiwgImxhbmd1YWdlIjogInJ1IiwgImFjY2Vzc190b2tlbiI6ICIwODdkNmNjNDM3IiwgImV4cGlyZXNfaW4iOiA2MDgwMCwgImlkIjogMTMwOTAsICJyZWZyZXNoX3Rva2VuIjogIjc1MjFiNzY0MGMifQ==&amp;retloc=https%3A//apps.admitad.com/ru/getcoupons/</code></p>
<h2 id='description-of-signed_request-line'>Description of signed_request line</h2>
<p><strong>Description of signed_request line</strong></p>

<p>The signed_request string is a joint signature with the use of the HMAC SHA256 method for a base64-encoded data string in JSON format, point (.), and the base64-encoded data string itself in JSON format.
Data are signed by the secret key of your application known to Admitad only. The signature helps you to get sure that the request was sent by Admitad. It is impossible to falsify signed_request line without a secret key.</p>

<ul>
<li>the secret key of the application is available for the logged in publisher at the homepage for developers (when the “Get keys” button is clicked).</li>
</ul>

<p><strong>Example of data transferred to the application:</strong></p>

<p>{
    &#39;username&#39;:         &#39;webmaster1&#39;,
    &#39;id&#39;:               13090,
    &#39;first_name&#39;:       &#39;name&#39;,
    &#39;last_name&#39;:        &#39;surname&#39;,
    &#39;algorithm&#39;:        &#39;HMAC-SHA256&#39;,
    &#39;language&#39;:         &#39;ru&#39;,
    &#39;access_token&#39;:     &#39;087d6cc437&#39;,
    &#39;refresh_token&#39;:    &#39;7521b7640c&#39;,
    &#39;expires_in&#39;:       604800
}</p>

<p><strong>Description of data fields:</strong></p>

<table>
  <tr>
    <th>Name</th>
  </tr>
  <tr>
    <td>id</td>
  </tr>
  <tr>
    <td>first_name</td>
  </tr>
  <tr>
    <td>last_name</td>
  </tr>
  <tr>
    <td>algorithm</td>
  </tr>
  <tr>
    <td>language</td>
  </tr>
  <tr>
    <td>access_token</td>
  </tr>
  <tr>
    <td>refresh_token</td>
  </tr>
  <tr>
    <td>expires_in</td>
  </tr>
</table>

<p><strong>Below is an example of Python 2.7 code for encoding data, where client_secret = a0f8a8b241d8b8182a0ddd2e89f5b1:</strong></p>

<p><code>import hmac</code>
<code>import json</code>
<code>from hashlib import sha256</code>
<code>from base64 import b64encode</code>
<code>data = {</code>
    <code>&#39;username&#39;: &#39;advertiser1&#39;,</code>
    <code>&#39;id&#39;: 13090,</code>
    <code>&#39;first_name&#39;: &#39;name&#39;,</code>
    <code>&#39;last_name&#39;: &#39;surname&#39;,</code>
    <code>&#39;algorithm&#39;: &#39;HMAC-SHA256&#39;,</code>
    <code>&#39;language&#39;: &#39;ru&#39;,</code>
    <code>&#39;access_token&#39;: &#39;087d6cc437&#39;,</code>
    <code>&#39;refresh_token&#39;: &#39;7521b7640c&#39;,</code>
    <code>&#39;expires_in&#39;: 604800</code>
<code>}</code>
<code>data = b64encode(json.dumps(data))</code>
<code>signature = hmac.new(str(client_secret), msg=data, digestmod=sha256).hexdigest()</code>
<code>signed_request = &#39;%s.%s&#39; % (signature, data)</code></p>

<p><strong>Below is an example of Python 2.7 code for encoding data:</strong></p>

<p>import hmac
import json
from hashlib import sha256
from base64 import b64decode</p>

<p>def decode_data(signed_request):
    signature, encoded_data = signed_request.split(&#39;.&#39;, 1)
    data = json.loads(b64decode(encoded_data))
    if data.get(&#39;algorithm&#39;).upper() != &#39;HMAC-SHA256&#39;:
        return
    expected_signature = hmac.new(
        str(client_secret), msg=encoded_data, digestmod=sha256).hexdigest()
    if signature != expected_signature:
        return
    return data</p>

<p><strong>Below is an example of signed data (the signed_request variable):</strong></p>

<p><code>d3ddf1100c5e47a466cafe1e0dc8cb40a4f7bc3219744be1e049dd6d7a76450c.eyJ1c2VybmFtZSI6ICJhZHZlcnRpc2VyMSIsICJmaXJzdF9uYW1lIjogIm5hbWUiLCAibGFzdF9uYW1lIjogInN1cm5hbWUiLCAiYWxnb3JpdGhtIjogIkhNQUMtU0hBMjU2IiwgImxhbmd1YWdlIjogInJ1IiwgImFjY2Vzc190b2tlbiI6ICIwODdkNmNjNDM3IiwgImV4cGlyZXNfaW4iOiA2MDgwMCwgImlkIjogMTMwOTAsICJyZWZyZXNoX3Rva2VuIjogIjc1MjFiNzY0MGMifQ==</code></p>
<h2 id='help-on-access-settings'>Help on access settings</h2>
<p>To get the required rights during authorization, it is required to send scope parameter containing names of rights separated by a space.</p>

<table>
  <tr>
    <th>Name</th>
    <th>Access</th> 
  </tr>
  <tr>
    <td>public_data</td> 
    <td>
      <ul>
        <li>Types of ad spaces</li>
        <li>Ad space languages</li>
        <li>Advertising services</li>
        <li>Ad space categories</li>
        <li>Ad space regions</li>
        <li>List of currencies</li>
        <li>Coupon categories</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>websites</td> 
    <td>
      <ul>
        <li>List of ad spaces</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_websites</td> 
    <td>
      <ul>
        <li>Create an ad space</li>
        <li>Edit an ad space</li>
        <li>Ad space confirmation</li>
        <li>Delete an ad space</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>advcampaigns</td> 
    <td>
      <ul>
        <li>List of affiliate programs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>advcampaigns_for_website</td> 
    <td>
      <ul>
        <li>List of programs for the ad space</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_advcampaigns</td> 
    <td>
      <ul>
        <li>Join affiliate programs</li>
        <li>Unjoin affiliate programs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>banners</td> 
    <td>
      <ul>
        <li>Banners list</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>landings</td> 
    <td>
      <ul>
        <li>List of landing pages</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>banners_for_website</td> 
    <td>
      <ul>
        <li>List of banners for the ad space</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>payments</td> 
    <td>
      <ul>
        <li>List of payment requests</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_payments</td> 
    <td>
      <ul>
        <li>Creation of payment requests</li>
        <li>Delete payment requests</li>
        <li>Confirm payment requests</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>announcements</td> 
    <td>
      <ul>
        <li>List of notifications</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>referrals</td> 
    <td>
      <ul>
        <li>List of referrals</li>
      </ul>
    </td>
  </tr>
   <tr>
    <td>coupons</td> 
    <td>
      <ul>
        <li>List of coupons</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>coupons_for_website</td> 
    <td>
      <ul>
        <li>List of coupons for the ad space</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>private_data</td> 
    <td>
      <ul>
        <li>Info about the publisher (name, language)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>tickets</td> 
    <td>
      <ul>
        <li>List of publisher tickets</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_tickets</td> 
    <td>
      <ul>
        <li>Create a ticket</li>
        <li>Comment on the ticket</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>private_data_email</td> 
    <td>
      <ul>
        <li>Info about the publisher (name, language, e-mail)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>private_data_phone</td> 
    <td>
      <ul>
        <li>Info about the publisher (name, language, phone number)</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>private_data_balance</td> 
    <td>
      <ul>
        <li>Info about the publisher balance</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>validate_links</td> 
    <td>
      <ul>
        <li>Check links</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>deeplink_generator</td> 
    <td>
      <ul>
        <li>Deeplink generator</li>
      </ul>
    </td>
  </tr>
   <tr>
    <td>statistics</td> 
    <td>
      <ul>
        <li>Publisher reports</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>opt_codes</td> 
    <td>
      <ul>
        <li>List of Postback URLs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_opt_codes</td> 
    <td>
      <ul>
        <li>Create Postback URL by action</li>
        <li>Editing Postback URL by action</li>
        <li>Creating of Postback URLs by the program status change</li>
        <li>Editing Postback URL by the program change status</li>
        <li>Removing Postback URLs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>webmaster_retag</td> 
    <td>
      <ul>
        <li>List of ReTag tags</li>
        <li>Available program levels</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_webmaster_retag</td> 
    <td>
      <ul>
        <li>Create ReTag tags</li>
        <li>Edit ReTag tags</li>
        <li>Delete ReTag tags</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>broken_links</td> 
    <td>
      <ul>
        <li>List of broken links</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_broken_links</td> 
    <td>
      <ul>
        <li>Fixing broken links</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>lost_orders</td> 
    <td>
      <ul>
        <li>List of lost orders</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_lost_orders</td> 
    <td>
      <ul>
        <li>Creation of lost order</li>
        <li>Canceling a lost order</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>broker_application</td> 
    <td>
      <ul>
        <li>List of broker applications</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>manage_broker_application</td> 
    <td>
      <ul>
        <li>Creating broker applications</li>
      </ul>
    </td>
  </tr>
</table>

<p><strong>Example:</strong></p>

<p><code>scope=public_date20%websites%20coupons</code></p>
<h2 id='help-on-api-response-codes'>Help on API response codes</h2>
<p><strong>Help on API response codes</strong></p>

<ul>
  <li>in case of a positive result, the response will be 200, 201 or 202.</li>
  <li>if the URL is incorrect, the response will be 404.</li>
  <li>if not enough rights for the transaction, the response will be 403 or 401.</li>
  <li>in case of any errors, the response will be 400 or 500.</li>
  <li>in case the maximum number of requests for the period is exceeded, the response will be 503. The current limit - up to 60 requests per minute for the application.</li>
</ul>

<p>The response of API server is in JSON format. In case of an error, the response of the server will look like this:</p>

<p>HTTP/1.1 401 UNAUTHORIZED
Server: nginx/1.2.3
Date: Mon, 17 Sep 2012 10:07:39 GMT
Content-Type: application/json; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Authorization, Cookie
WWW-Authenticate: Bearer realm=&quot;&quot;, error=&quot;invalid_token&quot;, error_description=&quot;Token doesn&#39;t exist&quot;
Content-Language: ru
Set-Cookie: section=webmaster; expires=Tue, 17-Sep-2013 13:07:39 GMT; Path=/</p>

<p>{&quot;error_description&quot;: &quot;Token doesn&#39;t exist&quot;, &quot;error_code&quot;: 1, &quot;error&quot;: &quot;invalid_token&quot;}</p>

<p>Transferred data include the name of the error error. They can also include additional information:</p>

<ul>
  <li>**error_description** - error description</li>
  <li>**error_code** - additional error code</li>
</ul>

<p><strong>Additional error codes:</strong></p>

<table>
  <tr>
    <th>Value</th>
    <th>Description</th> 
  </tr>
  <tr>
    <td>0</td>
    <td>The token expired</td> 
  </tr>
  <tr>
    <td>1</td>
    <td>Incorrect or invalid token</td> 
  </tr>
  <tr>
    <td>2</td>
    <td>The key has no sufficient access rights for performing the operation</td> 
  </tr>
  <tr>
    <td>3</td>
    <td>Incorrect request</td> 
  </tr>
  <tr>
    <td>4</td>
    <td>The maximum number of requests for the period expired</td> 
  </tr>
  <tr>
    <td>5</td>
    <td>The refresh token is unavailable</td> 
  </tr>
  <tr>
    <td>6</td>
    <td>The maximum number of tokens has been exceeded</td> 
  </tr>
</table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
